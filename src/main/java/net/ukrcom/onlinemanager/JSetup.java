/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */
package net.ukrcom.onlinemanager;

import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;

/**
 *
 * @author olden
 */
public class JSetup extends javax.swing.JDialog {

    /**
     * Creates new form jSetup
     *
     * @param owner
     */
    public JSetup(JFrame owner) {
        super(owner, true); // true = модальне вікно
        this.owner = owner;
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        jPanelDatabaseConfig = new javax.swing.JPanel();
        jLabelServerName = new javax.swing.JLabel();
        jTextFieldServerName = new javax.swing.JTextField();
        jButtonServerName = new javax.swing.JButton();
        jLabelDatabaseName = new javax.swing.JLabel();
        jTextFieldDatabaseName = new javax.swing.JTextField();
        jButtonDatabaseName = new javax.swing.JButton();
        jLabelUsername = new javax.swing.JLabel();
        jTextFieldUsername = new javax.swing.JTextField();
        jButtonUsername = new javax.swing.JButton();
        jLabelPassword = new javax.swing.JLabel();
        jPasswordFieldPassword = new javax.swing.JPasswordField();
        jButtonPassword = new javax.swing.JButton();
        jPanelOkCancel = new javax.swing.JPanel();
        jButtonOk = new javax.swing.JButton();
        jButtonCancel = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("Setup");
        setAlwaysOnTop(true);
        setMaximumSize(new java.awt.Dimension(380, 160));
        setMinimumSize(new java.awt.Dimension(380, 160));
        setModalExclusionType(java.awt.Dialog.ModalExclusionType.APPLICATION_EXCLUDE);
        setPreferredSize(new java.awt.Dimension(380, 200));
        setSize(new java.awt.Dimension(380, 200));
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowActivated(java.awt.event.WindowEvent evt) {
                formWindowActivated(evt);
            }
        });
        getContentPane().setLayout(new java.awt.GridBagLayout());

        jPanelDatabaseConfig.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        jPanelDatabaseConfig.setLayout(new java.awt.GridBagLayout());

        jLabelServerName.setLabelFor(jTextFieldServerName);
        jLabelServerName.setText("Server Name");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(2, 0, 2, 0);
        jPanelDatabaseConfig.add(jLabelServerName, gridBagConstraints);

        jTextFieldServerName.setMinimumSize(new java.awt.Dimension(250, 23));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.insets = new java.awt.Insets(2, 0, 2, 0);
        jPanelDatabaseConfig.add(jTextFieldServerName, gridBagConstraints);

        jButtonServerName.setText("❌");
        jButtonServerName.setBorder(javax.swing.BorderFactory.createCompoundBorder());
        jButtonServerName.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonServerNameActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.insets = new java.awt.Insets(2, 2, 2, 2);
        jPanelDatabaseConfig.add(jButtonServerName, gridBagConstraints);

        jLabelDatabaseName.setLabelFor(jTextFieldDatabaseName);
        jLabelDatabaseName.setText("Database Name");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(2, 0, 2, 0);
        jPanelDatabaseConfig.add(jLabelDatabaseName, gridBagConstraints);

        jTextFieldDatabaseName.setPreferredSize(new java.awt.Dimension(250, 23));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.insets = new java.awt.Insets(2, 0, 2, 0);
        jPanelDatabaseConfig.add(jTextFieldDatabaseName, gridBagConstraints);

        jButtonDatabaseName.setText("❌");
        jButtonDatabaseName.setBorder(javax.swing.BorderFactory.createCompoundBorder());
        jButtonDatabaseName.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonDatabaseNameActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.insets = new java.awt.Insets(2, 2, 2, 2);
        jPanelDatabaseConfig.add(jButtonDatabaseName, gridBagConstraints);

        jLabelUsername.setLabelFor(jTextFieldUsername);
        jLabelUsername.setText("Username");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(2, 0, 2, 0);
        jPanelDatabaseConfig.add(jLabelUsername, gridBagConstraints);

        jTextFieldUsername.setPreferredSize(new java.awt.Dimension(250, 23));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.insets = new java.awt.Insets(2, 0, 2, 0);
        jPanelDatabaseConfig.add(jTextFieldUsername, gridBagConstraints);

        jButtonUsername.setText("❌");
        jButtonUsername.setBorder(javax.swing.BorderFactory.createCompoundBorder());
        jButtonUsername.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonUsernameActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.insets = new java.awt.Insets(2, 2, 2, 2);
        jPanelDatabaseConfig.add(jButtonUsername, gridBagConstraints);

        jLabelPassword.setLabelFor(jPasswordFieldPassword);
        jLabelPassword.setText("Password");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(2, 0, 2, 0);
        jPanelDatabaseConfig.add(jLabelPassword, gridBagConstraints);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.insets = new java.awt.Insets(2, 0, 2, 0);
        jPanelDatabaseConfig.add(jPasswordFieldPassword, gridBagConstraints);

        jButtonPassword.setText("❌");
        jButtonPassword.setBorder(javax.swing.BorderFactory.createCompoundBorder());
        jButtonPassword.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonPasswordActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.insets = new java.awt.Insets(2, 2, 2, 2);
        jPanelDatabaseConfig.add(jButtonPassword, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridwidth = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.insets = new java.awt.Insets(10, 2, 2, 2);
        getContentPane().add(jPanelDatabaseConfig, gridBagConstraints);

        java.awt.FlowLayout flowLayout1 = new java.awt.FlowLayout(java.awt.FlowLayout.CENTER, 1, 2);
        flowLayout1.setAlignOnBaseline(true);
        jPanelOkCancel.setLayout(flowLayout1);

        jButtonOk.setText("Ok");
        jButtonOk.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonOkActionPerformed(evt);
            }
        });
        jPanelOkCancel.add(jButtonOk);

        jButtonCancel.setText("Cancel");
        jButtonCancel.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonCancelActionPerformed(evt);
            }
        });
        jPanelOkCancel.add(jButtonCancel);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridwidth = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.insets = new java.awt.Insets(2, 2, 10, 2);
        getContentPane().add(jPanelOkCancel, gridBagConstraints);

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jButtonCancelActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonCancelActionPerformed
        this.dispose();
    }//GEN-LAST:event_jButtonCancelActionPerformed

    private void jButtonOkActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonOkActionPerformed
        String serverName, databaseName, username, password;
        jConfig config;

        serverName = jTextFieldServerName.getText();
        databaseName = jTextFieldDatabaseName.getText();
        username = jTextFieldUsername.getText();
        password = String.valueOf(jPasswordFieldPassword.getPassword());

        config = new jConfig(serverName, databaseName, username, password);
        try {
            new jConfigSerializing().save(config);
        } catch (IOException ex) {
            Logger.getLogger(JSetup.class.getName()).log(Level.SEVERE, null, ex);
        }

        this.dispose();
    }//GEN-LAST:event_jButtonOkActionPerformed

    private void jButtonServerNameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonServerNameActionPerformed
        jTextFieldServerName.setText("");
    }//GEN-LAST:event_jButtonServerNameActionPerformed

    private void jButtonDatabaseNameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonDatabaseNameActionPerformed
        jTextFieldDatabaseName.setText("");
    }//GEN-LAST:event_jButtonDatabaseNameActionPerformed

    private void jButtonUsernameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonUsernameActionPerformed
        jTextFieldUsername.setText("");
    }//GEN-LAST:event_jButtonUsernameActionPerformed

    private void jButtonPasswordActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonPasswordActionPerformed
        jPasswordFieldPassword.setText("");
    }//GEN-LAST:event_jButtonPasswordActionPerformed

    private void formWindowActivated(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_formWindowActivated
        loadConfig();
    }//GEN-LAST:event_formWindowActivated

    private void loadConfig() {
        try {
            jConfig config = new jConfigSerializing().load();

            jTextFieldServerName.setText(config.getServerName());
            jTextFieldDatabaseName.setText(config.getDatabaseName());
            jTextFieldUsername.setText(config.getUsername());
            jPasswordFieldPassword.setText(config.getPassword());

        } catch (IOException | ClassNotFoundException ex) {
            Logger.getLogger(JSetup.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jButtonCancel;
    private javax.swing.JButton jButtonDatabaseName;
    private javax.swing.JButton jButtonOk;
    private javax.swing.JButton jButtonPassword;
    private javax.swing.JButton jButtonServerName;
    private javax.swing.JButton jButtonUsername;
    private javax.swing.JLabel jLabelDatabaseName;
    private javax.swing.JLabel jLabelPassword;
    private javax.swing.JLabel jLabelServerName;
    private javax.swing.JLabel jLabelUsername;
    private javax.swing.JPanel jPanelDatabaseConfig;
    private javax.swing.JPanel jPanelOkCancel;
    private javax.swing.JPasswordField jPasswordFieldPassword;
    private javax.swing.JTextField jTextFieldDatabaseName;
    private javax.swing.JTextField jTextFieldServerName;
    private javax.swing.JTextField jTextFieldUsername;
    // End of variables declaration//GEN-END:variables

    private JFrame setup;
    private final JFrame owner;
}
